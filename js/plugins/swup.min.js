!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Swup=n():t.Swup=n()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function t(){return e.default}:function t(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Link=t.markSwupElements=t.getCurrentUrl=t.transitionEnd=t.fetch=t.getDataFromHtml=t.createHistoryRecord=t.classify=void 0;var r=n(8),i=$(r),a=n(9),o=$(a),s=n(10),u=$(s),l=n(11),c=$(l),f=n(12),d=$(f),h=n(13),p=$(h),g=n(14),v=$(g),m=n(15),y=$(m);function $(e){return e&&e.__esModule?e:{default:e}}t.classify=i.default,t.createHistoryRecord=o.default,t.getDataFromHtml=u.default,t.fetch=c.default,t.transitionEnd=d.default,t.getCurrentUrl=p.default,t.markSwupElements=v.default,t.Link=y.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.query=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"!=typeof t?t:n.querySelector(t)},t.queryAll=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"!=typeof t?t:Array.prototype.slice.call(n.querySelectorAll(t))}},function(e,t,n){"use strict";var r,i,a=(r=n(3),r&&r.__esModule?r:{default:r});e.exports=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),o=L(a),s=n(6),u=L(s),l=n(7),c=L(l),f=n(16),d=L(f),h=n(17),p=L(h),g=n(18),v=L(g),m=n(19),y=L(m),$=n(20),E=L($),w=n(21),P=L(w),k=n(22),b=L(k),S=n(23),_=n(1),H=n(0);function L(e){return e&&e.__esModule?e:{default:e}}var M=function(){function e(t){!function e(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}(this,e);var n={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',linkSelector:'a[href^="'+window.location.origin+'"]:not([data-no-swup]), a[href^="/"]:not([data-no-swup]), a[href^="#"]:not([data-no-swup])',cache:!0,containers:["#swup"],requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},plugins:[],skipPopStateHandling:function e(t){return!(t.state&&"swup"===t.state.source)}},i=r({},n,t);this._handlers={animationInDone:[],animationInStart:[],animationOutDone:[],animationOutStart:[],animationSkipped:[],clickLink:[],contentReplaced:[],disabled:[],enabled:[],openPageInNewTab:[],pageLoaded:[],pageRetrievedFromCache:[],pageView:[],popState:[],samePage:[],samePageWithHash:[],serverError:[],transitionStart:[],transitionEnd:[],willReplaceContent:[]},this.scrollToElement=null,this.preloadPromise=null,this.options=i,this.plugins=[],this.transition={},this.delegatedListeners={},this.boundPopStateHandler=this.popStateHandler.bind(this),this.cache=new u.default,this.cache.swup=this,this.loadPage=c.default,this.renderPage=d.default,this.triggerEvent=p.default,this.on=v.default,this.off=y.default,this.updateTransition=E.default,this.getAnimationPromises=P.default,this.getPageData=b.default,this.log=function(){},this.use=S.use,this.unuse=S.unuse,this.findPlugin=S.findPlugin,this.enable()}return i(e,[{key:"enable",value:function e(){var t=this;if("undefined"==typeof Promise){console.warn("Promise is not supported");return}this.delegatedListeners.click=(0,o.default)(document,this.options.linkSelector,"click",this.linkClickHandler.bind(this)),window.addEventListener("popstate",this.boundPopStateHandler);var n=(0,H.getDataFromHtml)(document.documentElement.outerHTML,this.options.containers);n.url=n.responseURL=(0,H.getCurrentUrl)(),this.options.cache&&this.cache.cacheUrl(n),(0,H.markSwupElements)(document.documentElement,this.options.containers),this.options.plugins.forEach(function(e){t.use(e)}),window.history.replaceState(Object.assign({},window.history.state,{url:window.location.href,random:Math.random(),source:"swup"}),document.title,window.location.href),this.triggerEvent("enabled"),document.documentElement.classList.add("swup-enabled"),this.triggerEvent("pageView")}},{key:"destroy",value:function e(){var t=this;this.delegatedListeners.click.destroy(),window.removeEventListener("popstate",this.boundPopStateHandler),this.cache.empty(),this.options.plugins.forEach(function(e){t.unuse(e)}),(0,_.queryAll)("[data-swup]").forEach(function(e){e.removeAttribute("data-swup")}),this.off(),this.triggerEvent("disabled"),document.documentElement.classList.remove("swup-enabled")}},{key:"linkClickHandler",value:function e(t){if(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)this.triggerEvent("openPageInNewTab",t);else if(0===t.button){this.triggerEvent("clickLink",t),t.preventDefault();var n=new H.Link(t.delegateTarget);if(n.getAddress()==(0,H.getCurrentUrl)()||""==n.getAddress())""!=n.getHash()?(this.triggerEvent("samePageWithHash",t),null!=document.querySelector(n.getHash())?history.replaceState({url:n.getAddress()+n.getHash(),random:Math.random(),source:"swup"},document.title,n.getAddress()+n.getHash()):console.warn("Element for offset not found ("+n.getHash()+")")):this.triggerEvent("samePage",t);else{""!=n.getHash()&&(this.scrollToElement=n.getHash());var r=t.delegateTarget.getAttribute("data-swup-transition");this.loadPage({url:n.getAddress(),customTransition:r},!1)}}}},{key:"popStateHandler",value:function e(t){if(!this.options.skipPopStateHandling(t)){var n=new H.Link(t.state?t.state.url:window.location.pathname);""!==n.getHash()?this.scrollToElement=n.getHash():t.preventDefault(),this.triggerEvent("popState",t),this.loadPage({url:n.getAddress()},t)}}},]),e}();t.default=M},function(e,t,n){var r=n(5);function i(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}e.exports=function e(t,n,r,a,o){var s=i.apply(this,arguments);return t.addEventListener(r,s,o),{destroy:function(){t.removeEventListener(r,s,o)}}}},function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=function e(t,n){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(n))return t;t=t.parentNode}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.Cache=function(){function e(){!function e(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}(this,e),this.pages={},this.last=null}return r(e,[{key:"cacheUrl",value:function e(t){t.url in this.pages==!1&&(this.pages[t.url]=t),this.last=this.pages[t.url],this.swup.log("Cache ("+Object.keys(this.pages).length+")",this.pages)}},{key:"getPage",value:function e(t){return this.pages[t]}},{key:"getCurrentPage",value:function e(){return this.getPage(window.location.pathname+window.location.search)}},{key:"exists",value:function e(t){return t in this.pages}},{key:"empty",value:function e(){this.pages={},this.last=null,this.swup.log("Cache cleared")}},{key:"remove",value:function e(t){delete this.pages[t]}},]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),a=function e(t,n){var a=this,o=[],s=void 0;this.triggerEvent("transitionStart",n),null!=t.customTransition?(this.updateTransition(window.location.pathname,t.url,t.customTransition),document.documentElement.classList.add("to-"+(0,i.classify)(t.customTransition))):this.updateTransition(window.location.pathname,t.url),!n||this.options.animateHistoryBrowsing?function e(){if(a.triggerEvent("animationOutStart"),document.documentElement.classList.add("is-changing"),document.documentElement.classList.add("is-leaving"),document.documentElement.classList.add("is-animating"),n&&document.documentElement.classList.add("is-popstate"),document.documentElement.classList.add("to-"+(0,i.classify)(t.url)),Promise.all(o=a.getAnimationPromises("out")).then(function(){a.triggerEvent("animationOutDone")}),!n){var r=void 0;r=null!=a.scrollToElement?t.url+a.scrollToElement:t.url,(0,i.createHistoryRecord)(r)}}():this.triggerEvent("animationSkipped"),this.cache.exists(t.url)?(s=new Promise(function(e){e()}),this.triggerEvent("pageRetrievedFromCache")):s=this.preloadPromise&&this.preloadPromise.route==t.url?this.preloadPromise:new Promise(function(e,n){(0,i.fetch)(r({},t,{headers:a.options.requestHeaders}),function(r){if(500===r.status){a.triggerEvent("serverError"),n(t.url);return}var i=a.getPageData(r);if(null!=i)i.url=t.url;else{n(t.url);return}a.cache.cacheUrl(i),a.triggerEvent("pageLoaded"),e()})}),Promise.all(o.concat([s])).then(function(){a.renderPage(a.cache.getPage(t.url),n),a.preloadPromise=null}).catch(function(e){a.options.skipPopStateHandling=function(){return window.location=e,!0},window.history.go(-1)})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){var n=t.toString().toLowerCase().replace(/\s+/g,"-").replace(/\//g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");return"/"===n[0]&&(n=n.splice(1)),""===n&&(n="homepage"),n};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){window.history.pushState({url:t||window.location.href.split(window.location.hostname)[1],random:Math.random(),source:"swup"},document.getElementsByTagName("title")[0].innerText,t||window.location.href.split(window.location.hostname)[1])};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),a=function e(t,n){var a=document.createElement("html");a.innerHTML=t;for(var o=[],s=function e(t){if(null==a.querySelector(n[t]))return{v:null};(0,i.queryAll)(n[t]).forEach(function(e,r){(0,i.queryAll)(n[t],a)[r].setAttribute("data-swup",o.length),o.push((0,i.queryAll)(n[t],a)[r].outerHTML)})},u=0;u<n.length;u++){var l=s(u);if((void 0===l?"undefined":r(l))==="object")return l.v}var c={title:a.querySelector("title").innerText,pageClass:a.querySelector("body").className,originalContent:t,blocks:o};return a.innerHTML="",a=null,c};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=r({},{url:window.location.pathname+window.location.search,method:"GET",data:null,headers:{}},t),a=new XMLHttpRequest;return a.onreadystatechange=function(){4===a.readyState&&(a.status,n(a))},a.open(i.method,i.url,!0),Object.keys(i.headers).forEach(function(e){a.setRequestHeader(e,i.headers[e])}),a.send(i.data),a};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){var t=document.createElement("div"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in n)if(void 0!==t.style[r])return n[r];return!1};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){return window.location.pathname+window.location.search};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function e(t,n){for(var i=0,a=function e(a){null==t.querySelector(n[a])?console.warn("Element "+n[a]+" is not in current page."):(0,r.queryAll)(n[a]).forEach(function(e,o){(0,r.queryAll)(n[a],t)[o].setAttribute("data-swup",i),i++})},o=0;o<n.length;o++)a(o)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){!function e(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}(this,e),t instanceof Element||t instanceof SVGElement?this.link=t:(this.link=document.createElement("a"),this.link.href=t)}return r(e,[{key:"getPath",value:function e(){var t=this.link.pathname;return"/"!==t[0]&&(t="/"+t),t}},{key:"getAddress",value:function e(){var t=this.link.pathname+this.link.search;return this.link.getAttribute("xlink:href")&&(t=this.link.getAttribute("xlink:href")),"/"!==t[0]&&(t="/"+t),t}},{key:"getHash",value:function e(){return this.link.hash}},]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(1);var i=n(0),a=function e(t,n){var a=this;document.documentElement.classList.remove("is-leaving");var o=new i.Link(t.responseURL);window.location.pathname!==o.getPath()&&(window.history.replaceState({url:o.getPath(),random:Math.random(),source:"swup"},document.title,o.getPath()),this.cache.cacheUrl(r({},t,{url:o.getPath()}))),(!n||this.options.animateHistoryBrowsing)&&document.documentElement.classList.add("is-rendering"),this.triggerEvent("willReplaceContent",n);for(var s=0;s<t.blocks.length;s++)document.body.querySelector('[data-swup="'+s+'"]').outerHTML=t.blocks[s];document.title=t.title,this.triggerEvent("contentReplaced",n),this.triggerEvent("pageView",n),this.options.cache||this.cache.empty(),setTimeout(function(){(!n||a.options.animateHistoryBrowsing)&&(a.triggerEvent("animationInStart"),document.documentElement.classList.remove("is-animating"))},10);var u=this.getAnimationPromises("in");!n||this.options.animateHistoryBrowsing?Promise.all(u).then(function(){a.triggerEvent("animationInDone"),a.triggerEvent("transitionEnd",n),document.documentElement.className.split(" ").forEach(function(e){(RegExp("^to-").test(e)||"is-changing"===e||"is-rendering"===e||"is-popstate"===e)&&document.documentElement.classList.remove(e)})}):this.triggerEvent("transitionEnd",n),this.scrollToElement=null};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n){this._handlers[t].forEach(function(e){try{e(n)}catch(t){console.error(t)}});var r=new CustomEvent("swup:"+t,{detail:t});document.dispatchEvent(r)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n){this._handlers[t]?this._handlers[t].push(n):console.warn("Unsupported event "+t+".")};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n){var r=this;if(null!=t){if(null!=n){if(this._handlers[t]&&this._handlers[t].filter(function(e){return e===n}).length){var i=this._handlers[t].filter(function(e){return e===n})[0],a=this._handlers[t].indexOf(i);a>-1&&this._handlers[t].splice(a,1)}else console.warn("Handler for event '"+t+"' no found.")}else this._handlers[t]=[]}else Object.keys(this._handlers).forEach(function(e){r._handlers[e]=[]})};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,r){this.transition={from:t,to:n,custom:r}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),a=function e(){var t=[];return(0,r.queryAll)(this.options.animationSelector).forEach(function(e){var n=new Promise(function(t){e.addEventListener((0,i.transitionEnd)(),function(n){e==n.target&&t()})});t.push(n)}),t};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function e(t){var n=t.responseText,i=(0,r.getDataFromHtml)(n,this.options.containers);return i?(i.responseURL=t.responseURL?t.responseURL:window.location.href,i):(console.warn("Received page is invalid."),null)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.use=function e(t){if(!t.isSwupPlugin){console.warn("Not swup plugin instance "+t+".");return}return this.plugins.push(t),t.swup=this,"function"==typeof t._beforeMount&&t._beforeMount(),t.mount(),this.plugins},t.unuse=function e(t){var n=void 0;if(!(n="string"==typeof t?this.plugins.find(function(e){return t===e.name}):t)){console.warn("No such plugin.");return}n.unmount(),"function"==typeof n._afterUnmount&&n._afterUnmount();var r=this.plugins.indexOf(n);return this.plugins.splice(r,1),this.plugins},t.findPlugin=function e(t){return this.plugins.find(function(e){return t===e.name})}},])});